# Drill

|Stage| Job              |Linux  | Windows | OSX  |
|-|-------------------|---|---|---|
|Unittest| CLI Unittest      |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_CLI_Unittest) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Windows_CLI_Unittest) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=OSX_CLI_Unittest)|
|| GTK Unittest      |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_GTK_Unittest) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Windows_GTK_Unittest) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=OSX_GTK_Unittest) |
|| CLI Release       |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_CLI_Release) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Windows_CLI_Release) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=OSX_CLI_Release)|
|| GTK Release       |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_GTK_Release) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Windows_GTK_Release) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=OSX_GTK_Release)|
|Package| CLI .zip          |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_CLI_Release_Zip) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Windows_CLI_Release_Zip) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=OSX_CLI_Release_Zip) |
|| GTK .zip          |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_GTK_Release_Zip) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Windows_GTK_Release_Zip) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=OSX_GTK_Release_Zip) |
|| CLI .deb          |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_CLI_Release_Deb) | N/A | N/A |
|| GTK .deb          |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_GTK_Release_Deb) | N/A | N/A |
|| GTK AppImage      |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_GTK_Release_AppImage) | N/A | N/A |
|Test| Install CLI .deb          |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_CLI_Release_Deb_Test) | N/A | N/A |
|| Install GTK .deb         |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_GTK_Release_Deb_Test) | N/A | N/A |
|| AppImage Test     |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_GTK_Release_AppImage_Test) | N/A | N/A |
|| CLI Stress Test   |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_CLI_Stress_Test) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Windows_CLI_Stress_Test) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=OSX_CLI_Stress_Test) |
|| CLI Search Time Test   |  ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Linux_CLI_Time_Test) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Windows_CLI_Time_Test) | ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=OSX_CLI_Time_Test) |

| Result
|---|
| Publish Beta: ![](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master&jobName=Publish_Beta)
| Pipeline: [![Build Status](https://dev.azure.com/yatima1460/Drill/_apis/build/status/yatima1460.Drill?branchName=master)](https://dev.azure.com/yatima1460/Drill/_build/latest?definitionId=6&branchName=master)



[![Financial Contributors on Open Collective](https://opencollective.com/Drill/all/badge.svg?label=financial+contributors)](https://opencollective.com/Drill) [![GitHub issues](https://img.shields.io/github/issues/yatima1460/Drill.svg)](https://github.com/yatima1460/Drill/issues)
[![GitHub forks](https://img.shields.io/github/forks/yatima1460/Drill.svg)](https://github.com/yatima1460/Drill/network)
[![GitHub stars](https://img.shields.io/github/stars/yatima1460/Drill.svg)](https://github.com/yatima1460/Drill/stargazers)
[![GitHub license](https://img.shields.io/github/license/yatima1460/Drill.svg)](https://github.com/yatima1460/Drill/blob/master/LICENSE)

[![Twitter](https://img.shields.io/twitter/url/https/github.com/yatima1460/Drill.svg?style=social)](https://twitter.com/intent/tweet?text=Wow:&url=https%3A%2F%2Fgithub.com%2Fyatima1460%2FDrill)

Get notified for latest releases
[![Telegram](https://raw.githubusercontent.com/yatima1460/Drill/gh-pages/icons/telegram_icon.png)](https://telegram.me/drill_search)

# TL;DR: What is this

Search files without indexing, but clever crawling:
- At least 1 thread per mount point
- Use as much RAM as possible for caching stuff
- Try to avoid "black hole folders" using a regex based blocklist in which the crawler will never come out and never scan useful files (`node_modules`,`Windows`,etc)
- **Intended for desktop users**, no obscure Linux files and system files scans
- Use priority lists to first scan important folders.
- Betting on the future: slowly being optimized for SSDs/M.2 or fast RAID arrays


![](https://raw.githubusercontent.com/yatima1460/Drill/gh-pages/screenshot.png)


# How to run this

**Install the provided .deb (sudo required) or just double click the AppImage (no sudo)**

If your distro doesn't ask you to mark the AppImage as executable or nothing happens try:
- `chmod +x appimage_name_you_downloaded.AppImage`
- `./appimage_name_you_downloaded.AppImage`

If you want a version that doesn't require sudo and can be configurable download the .zip files.

# UI Guide

- Open                    = Left Double Click / Return / Enter / Space
- ~~Open containing folder  = Contextual menu~~



# Build and Run

**Some dependencies don't build with GDC!!!**
**Use DMD or LDC!!!**


## Build

### IMPORTANT

- If you omit `-b release` a slower debug version with infinite logs (NOT recommended) will be created
- Note: `-b release-debug` is somewhat in between a debug and a release version, it's compiled with fast code but it has debug checks enabled and some logs

### All OSes

- Install DMD
    - on Linux download the .deb, don't install it from apt,
      be sure GDC doesn't get installed as backend compiler
    - https://dlang.org/download.html#dmd
- Build a configuration, check the possible ones inside `dub.json`:
    - `dub build -b release -c CLI`
    - `dub build -b release -c GTK` 
        - requires libgtk-3-dev
    - etc...
- Output will be inside `./Build`

### Windows Visual Studio

- Install DMD
- Install Visual Studio 2017
- Install VisualD
- dub generate visuald
- Open the project & Build Solution



### Debugging

Help! GDB crashes/halts!!!

D uses `SIGUSR1` and `SIGUSR2` to let the GC communicate with the threads.

Set GDB or your debugger to ignore them:

```
handle SIGUSR1 print nostop pass
handle SIGUSR2 print nostop pass
```
If you want to do this automagically add them to .gdbinit in `/home/username/.gdbinit`
Remember to pass the signals otherwise the threads will lock, ONLY ignore the stop in your debugger.

https://dlang.org/library/core/thread/thread_set_gc_signals.html

# What is this

I was stressed on Linux because I couldn't find the files I needed, file searchers based on system indexing (updatedb) are prone to breaking and hard to configure for the average user, so did an all nighter and started this.

Drill is a modern file searcher for Linux that tries to fix the old problem of slow searching and indexing.
Nowadays even some SSDs are used for storage and every PC has nearly a minimum of 8GB of RAM and quad-core;
knowing this it's time to design a future-proof file searcher that doesn't care about weak systems and uses the full multithreaded power in a clever way to find your files in the fastest possible way.

* Heuristics:
The first change was the algorithm, a lot of file searchers use depth-first algorithms, this is a very stupid choice and everyone that implemented it is a moron, why? 
You see, normal humans don't create nested folders too much and you will probably get lost inside "black hole folders" or artificial archives (created by software); a breadth-first algorithm that scans your hard disks by depth has a higher chance to find the files you need.
Second change is excluding some obvious folders while crawling like `Windows` and `node_modules`, the average user doesn't care about .dlls and all the system files, and generally even devs too don't care, and if you need to find a system file you already know what you are doing and you should not use a UI tool.

* Clever multithreading: The second change is clever multithreading, I've never seen a file searcher that starts a thread *per disk* and it's 2019. The limitation for file searchers is 99% of the time just the disk speed, not the CPU or RAM, then why everyone just scans the disks sequentially????

* Use your goddamn RAM: The third change is caching everything, I don't care about your RAM, I will use even 8GB of your RAM if this provides me a faster way to find your files, unused RAM is wasted RAM, even truer the more time passes.

# Contributing
Read the Issues and check the labels for high priority ones

# TODOs

- Backend
    - settings in .config/drill-search
    - Commas in numbers strings
        - Correct separator based on current system internationalization
    - AM/PM time base
    - 1 Threadpool per mount point
        - 1 Threadpool PER DISK if possible
        - NVM could benefit when multiple threads are run for the same disk?
    - Metadata searching and new tokens (mp3, etc...)
    - No GC in Backend

- ncurses

- GTK
    - Open containing folder with right click 
    - Alternate row colors
    - Error messagebox if opening file fails
    - .rpm
    - Snap
    - Flatpak
    - Drag and drop?


## Contributors

### Code Contributors

This project exists thanks to all the people who contribute. [[Contribute](CONTRIBUTING.md)].
<a href="https://github.com/yatima1460/Drill/graphs/contributors"><img src="https://opencollective.com/Drill/contributors.svg?width=890&button=false" /></a>

### Financial Contributors

Become a financial contributor and help us sustain our community. [[Contribute](https://opencollective.com/Drill/contribute)]

#### Individuals

<a href="https://opencollective.com/Drill"><img src="https://opencollective.com/Drill/individuals.svg?width=890"></a>

#### Organizations

Support this project with your organization. Your logo will show up here with a link to your website. [[Contribute](https://opencollective.com/Drill/contribute)]

<a href="https://opencollective.com/Drill/organization/0/website"><img src="https://opencollective.com/Drill/organization/0/avatar.svg"></a>
<a href="https://opencollective.com/Drill/organization/1/website"><img src="https://opencollective.com/Drill/organization/1/avatar.svg"></a>
<a href="https://opencollective.com/Drill/organization/2/website"><img src="https://opencollective.com/Drill/organization/2/avatar.svg"></a>
<a href="https://opencollective.com/Drill/organization/3/website"><img src="https://opencollective.com/Drill/organization/3/avatar.svg"></a>
<a href="https://opencollective.com/Drill/organization/4/website"><img src="https://opencollective.com/Drill/organization/4/avatar.svg"></a>
<a href="https://opencollective.com/Drill/organization/5/website"><img src="https://opencollective.com/Drill/organization/5/avatar.svg"></a>
<a href="https://opencollective.com/Drill/organization/6/website"><img src="https://opencollective.com/Drill/organization/6/avatar.svg"></a>
<a href="https://opencollective.com/Drill/organization/7/website"><img src="https://opencollective.com/Drill/organization/7/avatar.svg"></a>
<a href="https://opencollective.com/Drill/organization/8/website"><img src="https://opencollective.com/Drill/organization/8/avatar.svg"></a>
<a href="https://opencollective.com/Drill/organization/9/website"><img src="https://opencollective.com/Drill/organization/9/avatar.svg"></a>

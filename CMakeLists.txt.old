cmake_minimum_required (VERSION 3.0)

project(Drill)

# execute_process(COMMAND "dub -b build -c CLI" RESULT_VARIABLE dub_result OUTPUT_VARIABLE dub_var)
# message(STATUS "[${dub_result}]: ${dub_var}")

add_custom_target(Drill ALLDEPENDS )

add_custom_command(
  OUTPUT DrillD
  COMMAND dub
  ARGS -b build -c CLI
#   DEPENDS ${SOURCE_FILES} /tmp/bin/create_foo_hh main.cpp
  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
)

# create a target that includes some_file, this gives us a name that we can use later
add_custom_target(
DrillDCore
  DEPENDS DrillD
)

# we can add the target as a dependency, and it will affect only this library
add_dependencies(Drill DrillDCore)

if (WIN32)
    add_subdirectory(Win32)
endif (WIN32)

if (UNIX)
    add_subdirectory(GTK)
endif (UNIX)


language: bash

os:
- windows
- linux
- osx


before_cache:
  - brew cleanup

cache:
  directories:
    - $HOME/Library/Caches/Homebrew

script:
   - export DMD_VERSION=2.087.1
   # DO NOT USE "bash" here, but use "source"
   # so we can change global variables like PATH in sub-scripts
   - source ./.travis/install_d.bash
   - dub test -c CLI
   - source ./.travis/install_gtk.bash
   - dub test -c GTK
   - if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then bash ./.travis/pull_requests.bash; fi
   - if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash ./.travis/rolling_release.bash; fi
